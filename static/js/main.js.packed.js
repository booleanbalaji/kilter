window.Kilter={},Kilter.sendGA=function(t,e,l){typeof ga!="undefined"&&ga("send",{hitType:"event",eventCategory:t,eventAction:e,eventLabel:l})},Kilter.updateFontSize=function(t){console.log("elem",t);var e=1,l=$(t).width(),a=parseInt($(t).css("max-height"),10),n=$(t).find("span");while(n.width()>l||n.height()>a)n.css("font-size",parseInt(n.css("font-size"),10)-e+"px")},Kilter.getElemWidth=function(t){var e=$(t).css("width"),l=$(t).css("margin-left"),a=parseInt(e,10)+2.5*parseInt(l,10);return a},Kilter.enableScroll=function(t){$(".mCustomScrollbar").css("width",t*Kilter.getElemWidth(".proposal-card")+"px"),$(".mCustomScrollbar").mCustomScrollbar({axis:"x",theme:"dark-3",scrollInertia:10,alwaysShowScrollbar:0})},Kilter.parseJson=function(t,e,l){new Ractive({el:e,template:l,data:{content:t},complete:function(){var t=e+" .click";$(t).click(function(){var t=$(this).data("target"),e=$(this).data("label");Kilter.sendGA("click",e,t)})}})},Kilter.parseProposalJson=function(t){new Ractive({el:"#funnel-proposals",template:"#proposals-wrapper",data:{proposals:t.proposals},complete:function(){$.each($(".proposal-card .title"),function(t,e){Kilter.updateFontSize(e)}),Kilter.enableScroll(t.proposals.length),$(window).resize(function(){Kilter.enableScroll(t.proposals.length)}),$("#funnel-proposals .click, #funnel-proposals .btn").click(function(){var t=$(this).data("label"),e=$(this).data("target");Kilter.sendGA("click",t,e)})}})},$(document).ready(function(){if(initLeaflets(),$("#nav-home").length)var t=$("#nav-home").offset().top;$(window).scroll(function(){$("#nav-home").length&&($(this).scrollTop()>t?$("#nav-home").addClass("navbar-fixed-top"):$("#nav-home").removeClass("navbar-fixed-top"))}),$(".smooth-scroll").click(function(t){t.preventDefault();var e=$(this).attr("href"),l=$(""+e).offset().top-$(".site-navbar").height();$("html,body").animate({scrollTop:l},"900")}),$(".button").click(function(){var t=$(this).html(),e=$(this).attr("href");Kilter.sendGA("click",t,e)}),$(".click").click(function(){var t=$(this).data("target"),e=$(this).data("label");Kilter.sendGA("click",e,t)})});